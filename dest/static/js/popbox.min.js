define("Popbox",function(e){function t(e,t){return"dataset"in e?e.dataset[t]:e.getAttribute("data-"+t)}function n(e){var t=this.el=document.createElement("div"),n={"click#popClose":function(){this.close()}};this.zIndex=++popMaxzIndex,this.config=e||{},this.config.dragable&&this.bindDragEvent(n),this.useAnimate=!0,this.events=this.config.events&&c(n,e.events)||n,t.className="popbox-container_",t.style.cssText+=";position: fixed;display: none;top: 50%;left: 50%;z-index: "+this.zIndex,h&&(t.style.position="absolute"),this.config.style&&(t.style.cssText+=u(e.style)),t.innerHTML=this.config.el&&e.el.call(this,this.el)||"",document.body.insertBefore(t,document.body.firstChild),p.push({instance:this,el:this.el,zIndex:this.zIndex}),this.config.animate===!1?this.useAnimate=!1:k(),this.config.overlay!==!1&&this.buildOverlay(),this.config.shortcut=this.config.shortcut||!1,this.bind()}var o={},i="function"!=typeof addEventListener,a={mouseenter:{type:"mouseover",target:"fromElement"},mouseleave:{type:"mouseout",target:"toElement"},focus:i?"focusin":"focus",blur:i?"focusout":"blur"},s=function(){var e=function(e,t){return e.compareDocumentPosition?0!==(16&e.compareDocumentPosition(t)):e.contains(t)},t=function(t,n,i,s){var r,c,l=i,u=!1;return("mouseenter"===n||"mouseleave"===n)&&(c=n,n=a[c].type,i=function(n){var n=window.event||n;r=n.relatedTarget||n[a[c].target],e(t,r)||t===r?n.stopPropagation?n.stopPropagation():n.cancelBubble=!0:l.call(t,n)},o[c]=o[c]||[],o[c].push({_callback:l,callback:i})),("blur"===n||"focus"===n)&&(u=!0,n=a[n]),s.call(t,n,i,u)};return"function"==typeof addEventListener?function(e,n,o){t(e,n,o,function(t,n,o){return e.addEventListener(t,n,o)})}:function(e,n,o){t(e,n,o,function(t,n){return e.attachEvent("on"+t,n)})}}(),r=function(){var e=function(e,t,n,i){var s,r,c=!1;if("mouseenter"===t||"mouseleave"===t){s=o[t],r=t,t=a[r].type;for(var l=0;l<s.length;l++)if(n===s[l]._callback){n=s[l].callback;break}}return("blur"===t||"focus"===t)&&(c=!0,t=a[t]),i.call(e,t,n,c)};return"function"==typeof removeEventListener?function(t,n,o){e(t,n,o,function(e,n,o){return t.removeEventListener(e,n,o)})}:function(t,n,o){e(t,n,o,function(e,n){return t.attachEvent("on"+e,n)})}}(),c=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},u=function(e){var t=[";"];for(var n in e)e.hasOwnProperty(n)&&t.push(n+":"+e[n]);return t.join(";")},f=function(){return{docWidth:document.documentElement.scrollWidth||document.body.scrollWidth,docHeight:document.documentElement.scrollHeight||document.body.scrollHeight}},m=function(){return{width:document.documentElement.scrollLeft+document.documentElement.clientWidth/2,height:document.documentElement.scrollTop+document.documentElement.clientHeight/2}},d=function(){var e={webkit:"webkitAnimationEnd",Moz:"animationend",ms:"MSAnimationEnd",O:"animationend"},t=document.createElement("div").style,n=!1;for(var o in e)if(e.hasOwnProperty(o)&&o+"Animation"in t){n=e[o];break}return!n&&"animation"in t&&(n="animationend"),n}(),h="undefined"==typeof window.XMLHttpRequest,y=popMaxzIndex=9998,p=[],v=[],b=!1,g=!1,x=function(){var e={hide:"none",show:""},t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=function(e){return d?function(t,n,o,i){t.animationend=function(){o&&o.call(i),this.classList.remove(n),this.style.display=e,r(this,d,this.animationend),this.animationend=null},s(t,d,t.animationend),t.classList.add(n)}:function(t,n,o,i){t.style.display=e,o&&o.call(i)}}(e[n]));return t}(),k=function(){var e=".ui-animate-bounceIn{display:block!important;-webkit-animation:bounceIn .2s linear;-o-animation:bounceIn .2s linear;-moz-animation:bounceIn .2s linear;animation:bounceIn .2s linear}@-webkit-keyframes bounceIn{0%{-webkit-transform:scale(.5);opacity:0}70%{-webkit-transform:scale(1.03)}100%{-webkit-transform:scale(1)}}@-o-keyframes bounceIn{0%{-o-transform:scale(.5);opacity:0}70%{-o-transform:scale(1.03)}100%{-o-transform:scale(1)}}@-moz-keyframes bounceIn{0%{-moz-transform:scale(.5);opacity:0}70%{-moz-transform:scale(1.03)}100%{-moz-transform:scale(1)}}@keyframes bounceIn{0%{transform:scale(.5);opacity:0}70%{transform:scale(1.03)}100%{transform:scale(1)}}.ui-animate-bounceOut{-webkit-animation:bounceOut .2s linear;-o-animation:bounceOut .2s linear;animation:bounceOut .2s linear}@-webkit-keyframes bounceOut{0%{-webkit-transform:scale(1)}70%{-webkit-transform:scale(1.03)}100%{-webkit-transform:scale(0)}}@-o-keyframes bounceOut{0%{-o-transform:scale(1)}70%{-o-transform:scale(1.03)}100%{-o-transform:scale(0)}}@-moz-keyframes bounceOut{0%{-moz-transform:scale(1)}70%{-moz-transform:scale(1.03)}100%{-moz-transform:scale(0)}}@keyframes bounceOut{0%{transform:scale(1)}70%{transform:scale(1.03)}100%{transform:scale(0)}}.ui-animate-fadeIn{display:block!important;-webkit-animation:fadeIn .2s linear;-o-animation:fadeIn .2s linear;animation:fadeIn .2s linear}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:.5}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:.5}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:.5}}@keyframes fadeIn{0%{opacity:0}100%{opacity:.5}}.ui-animate-fadeOut{-webkit-animation:fadeOut .2s linear;-o-animation:fadeOut .2s linear;animation:fadeOut .2s linear}@-webkit-keyframes fadeOut{0%{opacity:.5}100%{opacity:0}}@-o-keyframes fadeOut{0%{opacity:.5}100%{opacity:0}}@-moz-keyframes fadeOut{0%{opacity:.5}100%{opacity:0}}@keyframes fadeOut{0%{opacity:.5}100%{opacity:0}}",t=document.createElement("style");t.setAttribute("type","text/css"),t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e;var n=!1;return function(){n||(n=!0,document.getElementsByTagName("head")[0].appendChild(t))}}();n.prototype={reDraw:function(e,t){return t&&(this.el.style.cssText+=u(t)),this.el.innerHTML=e.call(this,this.el),this.layoutFix(),this},bind:function(){var e=this.events,n=this,o=p,i=function(e){return t(e,"event")&&t(e,"event").split(",")||[]},a=function(e,t){if("function"==typeof[].indexOf)return-1!==e.indexOf(t);for(var n=0,o=e.length;o>n;n++)if(e[n]===t)return!0;return!1},r=function(){var e=function(e,t,n){for(l=e.length;l>t;t++)e[t].el.style.zIndex=n++};return function(){for(var t=0,i=o.length;i>t;t++)if(o[t].zIndex===n.zIndex){var a=o.splice(t,1)[0],s=a.el.style.zIndex;o.push(a),e(o,t,s);break}}}(),c=function(e){e=window.event||e;var t=e.keyCode||e.which;if(27===t)for(var i=0,a=o.length;a>i;i++)n.close.call(o[i].instance)};for(var u in e)e.hasOwnProperty(u)&&!function(t){var o=t.split("#"),r=function(s){s=window.event||s;var r=s.srcElement||s.target,c=i(r);a(c,o[1])&&e[t].call(n,s,r)};s(n.el,o[0],r)}(u);s(this.el,"mousedown",r),this.config.shortcut&&!b&&(b=!0,s(document,"keydown",c))},close:function(e){return this.toggleOverlay(!1),this.useAnimate?x.hide(this.el,"ui-animate-bounceOut",e,this):(this.el.style.display="none",e&&e.call(this)),this},show:function(e){return this.toggleOverlay(!0),this.useAnimate?x.show(this.el,"ui-animate-bounceIn",e,this):(this.el.style.display="block",e&&e.call(this)),this.layoutFix(),this},remove:function(){var e=this;this.close(function(){document.body.removeChild(e.el),e.overlayEl&&document.body.removeChild(e.overlayEl)})},buildOverlay:function(){var e=this;this.overlayEl=overlay=document.createElement("div"),v.push(overlay),overlay.style.cssText+=";position: absolute;display: none;width: "+f().docWidth+"px;height: "+f().docHeight+"px;top: 0;left: 0;background: #000;filter: alpha(opacity=50);opacity: .5;z-index: "+y,document.body.insertBefore(overlay,document.body.firstChild),s(overlay,"click",function(){e.remove()})},toggleOverlay:function(e){var t=function(e){e.style.cssText+=";width: "+f().docWidth+"px;height: "+f().docHeight+"px"};this.overlayEl&&(e===!0?(this.useAnimate?x.show(this.overlayEl,"ui-animate-fadeIn",null,this):this.overlayEl.style.display="block",t(this.overlayEl)):this.useAnimate?x.hide(this.overlayEl,"ui-animate-fadeOut",null,this):this.overlayEl.style.display="none"),g||(g=!0,s(window,"resize",function(){for(var e=0;e<v.length;e++)t(v[e])}))},bindDragEvent:function(e){var t=function(e){var t=this.el.style,n=this.el.offsetTop,o=this.el.offsetLeft,i={x:e.pageX||e.clientX,y:e.pageY||e.clientY},a={};t.marginLeft=t.marginTop="",t.cssText+=";top: "+n+"px;left: "+o+"px;",document.onmousemove=function(e){e=window.event||e,a={x:e.pageX||e.clientX,y:e.pageY||e.clientY},t.cssText+=";top: "+(n+a.y-i.y)+"px;left: "+(o+a.x-i.x)+"px;"},document.onmouseup=function(){document.onmouseup=document.onmousemove=document.onselect=null}};e["mousedown#popDrag"]=t},layoutFix:function(){var e=-this.el.offsetWidth/2+"px";offY=-this.el.offsetHeight/2+"px",this.el.style.cssText+=h?";top: "+m().height+"px;left: "+m().width+"px;":";top: 50%;left: 50%;",this.el.style.cssText+=";margin-top: "+offY+";margin-left: "+e}},e.Popbox=n});